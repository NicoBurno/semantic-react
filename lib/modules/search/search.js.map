{"version":3,"sources":["../../../src/components/modules/search/search.jsx"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAsBqB;;;AA0CjB,aA1CiB,MA0CjB,CAAY,KAAZ,EAAmB;8BA1CF,QA0CE;;;;2EA1CF,mBA2CP,QADS;;AAIf,cAAK,OAAL,GAAe,KAAf,CAJe;;AAMf,cAAK,KAAL,GAAa;AACT,mBAAO,KAAP;SADJ,CANe;;KAAnB;;iBA1CiB;;8CAqDK,OAAO,OAAO;;;AAGhC,gBAAI,KAAK,KAAL,CAAW,OAAX,KAAuB,MAAM,OAAN,IAAiB,MAAM,MAAN,EAAc;AACtD,uBAAO,KAAP,CADsD;aAA1D;;;;AAHgC,gBAS5B,KAAK,WAAL,IAAoB,KAAK,WAAL,CAAiB,KAAjB,KAA2B,EAA3B,EAA+B;AACnD,qBAAK,OAAL,GAAe,KAAK,KAAL,CAAW,OAAX,CADoC;aAAvD,MAEO;AACH,qBAAK,OAAL,GAAe,KAAf,CADG;aAFP;;AAMA,mBAAO,IAAP,CAfgC;;;;iCAkB3B;AACL,iBAAK,QAAL,CAAc;AACV,uBAAO,KAAP;aADJ,EADK;;;;iCAMA,GAAG;AACR,gBAAI,EAAE,MAAF,CAAS,KAAT,KAAmB,EAAnB,EAAuB;AACvB,qBAAK,QAAL,CAAc;AACV,2BAAO,KAAP;iBADJ,EADuB;aAA3B,MAIO;AACH,qBAAK,QAAL,CAAc;AACV,2BAAO,IAAP;iBADJ,EADG;AAIH,qBAAK,KAAL,CAAW,QAAX,CAAoB,CAApB,EAJG;aAJP;;;;kCAYM;AACN,iBAAK,QAAL,CAAc;AACV,uBAAO,IAAP;aADJ,EADM;;;;sCAMI,GAAG,OAAO;AACpB,iBAAK,WAAL,CAAiB,KAAjB,GAAyB,KAAzB,CADoB;;AAGpB,iBAAK,KAAL,CAAW,aAAX,CAAyB,CAAzB,EAA4B,KAA5B,EAHoB;;;;yCAMP;AACb,gBAAI,KAAK,KAAL,CAAW,IAAX,IAAmB,KAAK,KAAL,CAAW,OAAX,EAAoB;AACvC,uBAAO,KAAK,eAAL,EAAP,CADuC;aAA3C,MAEO;AACH,uBAAO,KAAK,WAAL,EAAP,CADG;aAFP;;;;0CAOc;AACd,mBACI;;kBAAK,WAAU,eAAV,EAAL;gBACK,KAAK,WAAL,EADL;gBAEI,gDAAM,MAAM,KAAK,KAAL,CAAW,IAAX,IAAmB,QAAnB,EAAZ,CAFJ;aADJ,CADc;;;;sCASJ;;;AACV,mBACI,yCAAO,WAAU,QAAV;AACH,qBAAI,cAAJ;AACA,wBAAQ,KAAK,MAAL,CAAY,IAAZ,CAAiB,IAAjB,CAAR;AACA,0BAAU,KAAK,QAAL,CAAc,IAAd,CAAmB,IAAnB,CAAV;AACA,yBAAS,KAAK,OAAL,CAAa,IAAb,CAAkB,IAAlB,CAAT;AACA,6BAAa,KAAK,KAAL,CAAW,WAAX;AACb,qBAAK,aAAC,IAAD;2BAAS,OAAK,WAAL,GAAmB,IAAnB;iBAAT;AACL,sBAAK,MAAL,EAPJ,CADJ,CADU;;;;wCAaE;AACZ,gBAAI,QAAQ;AACR,6BAAa,KAAK,KAAL,CAAW,WAAX;AACb,8BAAc,KAAK,KAAL,CAAW,YAAX;AACd,qBAAK,eAAL;AACA,+BAAe,KAAK,aAAL,CAAmB,IAAnB,CAAwB,IAAxB,CAAf;AACA,yBAAS,KAAK,OAAL,IAAgB,KAAK,KAAL,CAAW,OAAX;AACzB,wBAAQ,KAAK,WAAL,GAAmB,KAAK,WAAL,CAAiB,KAAjB,GAAyB,EAA5C;aANR,CADQ;;AAUZ,mBACI;;kBAAY,WAAW,KAAX;AACA,2BAAO,KAAK,KAAL,CAAW,cAAX;AACP,2BAAO,KAAK,KAAL,CAAW,cAAX;iBAFnB;gBAIK,IAAC,CAAK,KAAL,CAAW,KAAX,IAAoB,KAAK,WAAL,CAAiB,KAAjB,KAA2B,EAA3B,IAClB,iDAAa,KAAb,CADH;aALT,CAVY;;;;iCAuBP;;yBAKc,KAAK,KAAL,CALd;gBAEC,2BAFD;gBAEW,6BAFX;gBAEsB,6BAFtB;gBAEiC,uCAFjC;gBAEiD,iCAFjD;gBAGC,mCAHD;gBAGe,uCAHf;gBAG+B,mBAH/B;gBAGqC,uCAHrC;gBAGqD,yBAHrD;gBAIC,2BAJD;gBAIW,qCAJX;gBAI0B,iCAJ1B;gBAIuC,yBAJvC;;gBAKI;;;AALJ,iBAQL,CAAM,SAAN,GAAkB,0BAAW,KAAK,KAAL,CAAW,SAAX,EAAsB,KAAK,UAAL,EAAjC,CAAlB,CARK;;AAUL,mBAAO,gBAAM,aAAN,CACH,KAAK,KAAL,CAAW,SAAX,EACA,KAFG,EAGH,CACI,KAAK,cAAL,EADJ,EAEI,KAAK,aAAL,EAFJ,CAHG,CAAP,CAVK;;;;qCAoBI;AACT,mBAAO;AACH,oBAAI,KAAK,KAAL,CAAW,cAAX;;AAEJ,uBAAO,KAAK,KAAL,CAAW,KAAX;;AAEP,0BAAU,CAAC,MAAM,OAAN,CAAc,KAAK,KAAL,CAAW,OAAX,CAAf;;AAEV,wBAAQ,KAAK,KAAL,CAAW,cAAX;aAPZ,CADS;;;;WA/KI;EAAe,gBAAM,SAAN,WACzB,YAAY;AACf,cAAU,gBAAM,SAAN,CAAgB,IAAhB;AACV,eAAW,gBAAM,SAAN,CAAgB,GAAhB;AACX,eAAW,gBAAM,SAAN,CAAgB,SAAhB,CAA0B,CACjC,gBAAM,SAAN,CAAgB,IAAhB,EACA,gBAAM,SAAN,CAAgB,MAAhB,CAFO,CAAX;AAIA,oBAAgB,gBAAM,SAAN,CAAgB,IAAhB;AAChB,iBAAa,gBAAM,SAAN,CAAgB,MAAhB;AACb,kBAAc,gBAAM,SAAN,CAAgB,MAAhB;AACd,oBAAgB,gBAAM,SAAN,CAAgB,MAAhB;AAChB,UAAM,gBAAM,SAAN,CAAgB,SAAhB,CAA0B,CAC5B,gBAAM,SAAN,CAAgB,MAAhB,EACA,gBAAM,SAAN,CAAgB,IAAhB,CAFE,CAAN;AAIA,oBAAgB,gBAAM,SAAN,CAAgB,MAAhB;AAChB,aAAS,gBAAM,SAAN,CAAgB,IAAhB;AACT,cAAU,gBAAM,SAAN,CAAgB,IAAhB,CAAqB,UAArB;AACV,mBAAe,gBAAM,SAAN,CAAgB,IAAhB;AACf,iBAAa,gBAAM,SAAN,CAAgB,MAAhB;AACb,aAAS,gBAAM,SAAN,CAAgB,SAAhB,CAA0B,CAC/B,gBAAM,SAAN,CAAgB,KAAhB,EACA,gBAAM,SAAN,CAAgB,MAAhB,CAFK,CAAT;WAMG,eAAe;AAClB,eAAW,KAAX;AACA,oBAAgB,IAAhB;AACA,oBAAgB;AACZ,iBAAS,CAAT;AACA,eAAO,CAAP;KAFJ;AAIA,oBAAgB;AACZ,iBAAS,CAAT;AACA,eAAO,CAAP;KAFJ;AAIA,mBAAe,SAAS,IAAT,GAAgB,EAAhB;AACf,iBAAa,WAAb;;;kBAvCa","file":"search.js","sourcesContent":["import React from 'react';\r\nimport { Icon } from '../../elements';\r\nimport Transition from 'react-motion-ui-pack';\r\nimport Results from './results';\r\nimport classNames from 'classnames';\r\nimport Radium from 'radium';\r\n\r\n/*\r\n3 support results types:\r\n\r\n{\r\n    title: 'test',\r\n    description: 'testing'\r\n}\r\n\r\n{\r\n    animal: ['cat', 'dog']\r\n}\r\n\r\n['test', 'test']\r\n*/\r\n@Radium\r\nexport default class Search extends React.Component {\r\n    static propTypes = {\r\n        children: React.PropTypes.node,\r\n        className: React.PropTypes.any,\r\n        component: React.PropTypes.oneOfType([\r\n            React.PropTypes.func,\r\n            React.PropTypes.string\r\n        ]),\r\n        defaultClasses: React.PropTypes.bool,\r\n        emptyHeader: React.PropTypes.string,\r\n        emptyMessage: React.PropTypes.string,\r\n        enterAnimation: React.PropTypes.object,\r\n        icon: React.PropTypes.oneOfType([\r\n            React.PropTypes.string,\r\n            React.PropTypes.bool\r\n        ]),\r\n        leaveAnimation: React.PropTypes.object,\r\n        loading: React.PropTypes.bool,\r\n        onChange: React.PropTypes.func.isRequired,\r\n        onSearchClick: React.PropTypes.func,\r\n        placeholder: React.PropTypes.string,\r\n        results: React.PropTypes.oneOfType([\r\n            React.PropTypes.array,\r\n            React.PropTypes.object\r\n        ])\r\n    };\r\n\r\n    static defaultProps = {\r\n        component: 'div',\r\n        defaultClasses: true,\r\n        enterAnimation: {\r\n            opacity: 1,\r\n            scale: 1\r\n        },\r\n        leaveAnimation: {\r\n            opacity: 0,\r\n            scale: 0\r\n        },\r\n        onSearchClick: function noop() {},\r\n        placeholder: 'Search...'\r\n    };\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        // see shouldComponentUpdate\r\n        this.results = false;\r\n\r\n        this.state = {\r\n            focus: false\r\n        }\r\n    }\r\n\r\n    shouldComponentUpdate(props, state) {\r\n        // if the results are identical, don't rerender\r\n        // if the new state is inactive, we may be trying to blur\r\n        if (this.props.results === props.results && state.active) {\r\n            return false;\r\n        }\r\n\r\n        // if the search box is empty, don't allow re-rendering of results\r\n        // while the box animates closed\r\n        if (this.searchInput && this.searchInput.value === '') {\r\n            this.results = this.props.results;\r\n        } else {\r\n            this.results = false;\r\n        }\r\n\r\n        return true;\r\n    }\r\n\r\n    onBlur() {\r\n        this.setState({\r\n            focus: false\r\n        });\r\n    }\r\n\r\n    onChange(e) {\r\n        if (e.target.value === '') {\r\n            this.setState({\r\n                focus: false\r\n            });\r\n        } else {\r\n            this.setState({\r\n                focus: true\r\n            });\r\n            this.props.onChange(e);\r\n        }\r\n    }\r\n\r\n    onFocus() {\r\n        this.setState({\r\n            focus: true\r\n        });\r\n    }\r\n\r\n    onSearchClick(e, child) {\r\n        this.searchInput.value = child;\r\n\r\n        this.props.onSearchClick(e, child);\r\n    }\r\n\r\n    renderChildren() {\r\n        if (this.props.icon || this.props.loading) {\r\n            return this.renderIconInput();\r\n        } else {\r\n            return this.renderInput();\r\n        }\r\n    }\r\n\r\n    renderIconInput() {\r\n        return (\r\n            <div className=\"ui icon input\">\r\n                {this.renderInput()}\r\n                <Icon name={this.props.icon || 'search'} />\r\n            </div>\r\n        );\r\n    }\r\n\r\n    renderInput() {\r\n        return (\r\n            <input className=\"prompt\"\r\n                key=\"searchPrompt\"\r\n                onBlur={this.onBlur.bind(this)}\r\n                onChange={this.onChange.bind(this)}\r\n                onFocus={this.onFocus.bind(this)}\r\n                placeholder={this.props.placeholder}\r\n                ref={(ref) => this.searchInput = ref}\r\n                type=\"text\" />\r\n        );\r\n    }\r\n\r\n    renderResults() {\r\n        let props = {\r\n            emptyHeader: this.props.emptyHeader,\r\n            emptyMessage: this.props.emptyMessage,\r\n            key: 'searchResults',\r\n            onSearchClick: this.onSearchClick.bind(this),\r\n            results: this.results || this.props.results,\r\n            search: this.searchInput ? this.searchInput.value : ''\r\n        };\r\n\r\n        return (\r\n            <Transition component={false}\r\n                        enter={this.props.enterAnimation}\r\n                        leave={this.props.leaveAnimation}\r\n            >\r\n                {(this.state.focus && this.searchInput.value !== '') &&\r\n                    <Results {...props}/>\r\n                }\r\n\r\n            </Transition>\r\n        );\r\n    }\r\n\r\n    render() {\r\n        /* eslint-disable no-use-before-define */\r\n        let { children, className, component, defaultClasses, emptyHeader,\r\n              emptyMessage, enterAnimation, icon, leaveAnimation, loading,\r\n              onChange, onSearchClick, placeholder, results,\r\n              ...other } = this.props;\r\n        /* eslint-enable no-use-before-define */\r\n\r\n        other.className = classNames(this.props.className, this.getClasses());\r\n\r\n        return React.createElement(\r\n            this.props.component,\r\n            other,\r\n            [\r\n                this.renderChildren(),\r\n                this.renderResults()\r\n            ]\r\n        );\r\n    }\r\n\r\n    getClasses() {\r\n        return {\r\n            ui: this.props.defaultClasses,\r\n\r\n            focus: this.state.focus,\r\n\r\n            category: !Array.isArray(this.props.results),\r\n\r\n            search: this.props.defaultClasses\r\n        };\r\n    }\r\n\r\n}\r\n"]}