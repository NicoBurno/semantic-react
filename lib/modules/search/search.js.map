{"version":3,"sources":["../../../src/components/modules/search/search.jsx"],"names":[],"mappings":"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","file":"search.js","sourcesContent":["import React from 'react';\r\nimport { Icon } from '../../elements';\r\nimport Transition from 'react-motion-ui-pack';\r\nimport { Results } from './results';\r\nimport classNames from 'classnames';\r\nimport Radium from 'radium';\r\n\r\n/*\r\n3 support results types:\r\n\r\n{\r\n    title: 'test',\r\n    description: 'testing'\r\n}\r\n\r\n{\r\n    animal: ['cat', 'dog']\r\n}\r\n\r\n['test', 'test']\r\n*/\r\n@Radium\r\nexport class Search extends React.Component {\r\n    static propTypes = {\r\n        children: React.PropTypes.node,\r\n        className: React.PropTypes.any,\r\n        component: React.PropTypes.oneOfType([\r\n            React.PropTypes.func,\r\n            React.PropTypes.string\r\n        ]),\r\n        defaultClasses: React.PropTypes.bool,\r\n        emptyHeader: React.PropTypes.string,\r\n        emptyMessage: React.PropTypes.string,\r\n        enterAnimation: React.PropTypes.object,\r\n        icon: React.PropTypes.oneOfType([\r\n            React.PropTypes.string,\r\n            React.PropTypes.bool\r\n        ]),\r\n        leaveAnimation: React.PropTypes.object,\r\n        loading: React.PropTypes.bool,\r\n        onChange: React.PropTypes.func.isRequired,\r\n        onSearchClick: React.PropTypes.func,\r\n        placeholder: React.PropTypes.string,\r\n        results: React.PropTypes.oneOfType([\r\n            React.PropTypes.array,\r\n            React.PropTypes.object\r\n        ])\r\n    };\r\n\r\n    static defaultProps = {\r\n        component: 'div',\r\n        defaultClasses: true,\r\n        enterAnimation: {\r\n            opacity: 1,\r\n            scale: 1\r\n        },\r\n        leaveAnimation: {\r\n            opacity: 0,\r\n            scale: 0\r\n        },\r\n        onSearchClick: function noop() {},\r\n        placeholder: 'Search...'\r\n    };\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        // see shouldComponentUpdate\r\n        this.results = false;\r\n\r\n        this.state = {\r\n            focus: false\r\n        }\r\n    }\r\n\r\n    shouldComponentUpdate(props, state) {\r\n        // if the results are identical, don't rerender\r\n        // if the new state is inactive, we may be trying to blur\r\n        if (this.props.results === props.results && state.active) {\r\n            return false;\r\n        }\r\n\r\n        // if the search box is empty, don't allow re-rendering of results\r\n        // while the box animates closed\r\n        if (this.searchInput && this.searchInput.value === '') {\r\n            this.results = this.props.results;\r\n        } else {\r\n            this.results = false;\r\n        }\r\n\r\n        return true;\r\n    }\r\n\r\n    onBlur() {\r\n        this.setState({\r\n            focus: false\r\n        });\r\n    }\r\n\r\n    onChange(e) {\r\n        if (e.target.value === '') {\r\n            this.setState({\r\n                focus: false\r\n            });\r\n        } else {\r\n            this.setState({\r\n                focus: true\r\n            });\r\n            this.props.onChange(e);\r\n        }\r\n    }\r\n\r\n    onFocus() {\r\n        this.setState({\r\n            focus: true\r\n        });\r\n    }\r\n\r\n    onSearchClick(e, child) {\r\n        this.searchInput.value = child;\r\n\r\n        this.props.onSearchClick(e, child);\r\n    }\r\n\r\n    renderChildren() {\r\n        if (this.props.icon || this.props.loading) {\r\n            return this.renderIconInput();\r\n        } else {\r\n            return this.renderInput();\r\n        }\r\n    }\r\n\r\n    renderIconInput() {\r\n        return (\r\n            <div className=\"ui icon input\">\r\n                {this.renderInput()}\r\n                <Icon name={this.props.icon || 'search'} />\r\n            </div>\r\n        );\r\n    }\r\n\r\n    renderInput() {\r\n        return (\r\n            <input className=\"prompt\"\r\n                key=\"searchPrompt\"\r\n                onBlur={this.onBlur.bind(this)}\r\n                onChange={this.onChange.bind(this)}\r\n                onFocus={this.onFocus.bind(this)}\r\n                placeholder={this.props.placeholder}\r\n                ref={(ref) => this.searchInput = ref}\r\n                type=\"text\" />\r\n        );\r\n    }\r\n\r\n    renderResults() {\r\n        let props = {\r\n            emptyHeader: this.props.emptyHeader,\r\n            emptyMessage: this.props.emptyMessage,\r\n            key: 'searchResults',\r\n            onSearchClick: this.onSearchClick.bind(this),\r\n            results: this.results || this.props.results,\r\n            search: this.searchInput ? this.searchInput.value : ''\r\n        };\r\n\r\n        return (\r\n            <Transition component={false}\r\n                        enter={this.props.enterAnimation}\r\n                        leave={this.props.leaveAnimation}\r\n            >\r\n                {(this.state.focus && this.searchInput.value !== '') &&\r\n                    <Results {...props}/>\r\n                }\r\n\r\n            </Transition>\r\n        );\r\n    }\r\n\r\n    render() {\r\n        /* eslint-disable no-use-before-define */\r\n        let { children, className, component, defaultClasses, emptyHeader,\r\n              emptyMessage, enterAnimation, icon, leaveAnimation, loading,\r\n              onChange, onSearchClick, placeholder, results,\r\n              ...other } = this.props;\r\n        /* eslint-enable no-use-before-define */\r\n\r\n        other.className = classNames(this.props.className, this.getClasses());\r\n\r\n        return React.createElement(\r\n            this.props.component,\r\n            other,\r\n            [\r\n                this.renderChildren(),\r\n                this.renderResults()\r\n            ]\r\n        );\r\n    }\r\n\r\n    getClasses() {\r\n        return {\r\n            ui: this.props.defaultClasses,\r\n\r\n            focus: this.state.focus,\r\n\r\n            category: !Array.isArray(this.props.results),\r\n\r\n            search: this.props.defaultClasses\r\n        };\r\n    }\r\n\r\n}\r\n"]}